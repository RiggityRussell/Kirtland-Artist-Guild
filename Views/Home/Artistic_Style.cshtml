@model Kirtland_Artist_Guild.Models.ArtisticStyleViewModel
@{
    ViewData["Title"] = "Artistic Style";
}
@section styles {
    <link rel="stylesheet" href="~/css/Artistic_Style.css">
}

<div class="text-center">
    <h1 class="display-4">Artistic Style</h1>
    <p></p>
</div>

<div class="dropdown d-flex justify-content-center">
    @*This holds all three dropdown filters*@
    
    @*Button 1 begins*@
    <a class="btn btn-secondary dropdown-toggle mx-2" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Filter By Medium
    </a>
    <ul class="dropdown-menu">
        @foreach(var artmedium in Model.ArtMediums)
        {
            @if (artmedium.ID == (int)ViewData["CurrentMediumFilter"])
            {
                <li><a class="dropdown-item" href="?ColorFilter=@ViewData["CurrentColorFilter"]&MediumFilter=0&StyleFilter=@ViewData["CurrentStyleFilter"]" style="color:red">@artmedium.Name</a></li>
            }
            else
            {
                <li><a class="dropdown-item" href="?ColorFilter=@ViewData["CurrentColorFilter"]&MediumFilter=@artmedium.ID&StyleFilter=@ViewData["CurrentStyleFilter"]">@artmedium.Name</a></li>
            }
        }
    </ul>
    @*Button 1 ends*@

    @*Button 2 begins*@
    <a class="btn btn-secondary dropdown-toggle mx-2" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Filter by Color
    </a>
    <ul class="dropdown-menu">
        @foreach (var artcolor in Model.ArtColors)
        {
            @if(artcolor.ID == (int)ViewData["CurrentColorFilter"])
            {
                <li><a class="dropdown-item" href="?ColorFilter=0&MediumFilter=@ViewData["CurrentMediumFilter"]&StyleFilter=@ViewData["CurrentStyleFilter"]" style="color:red">@artcolor.Name</a></li>
            }
            else
            {
                <li><a class="dropdown-item" href="?ColorFilter=@artcolor.ID&MediumFilter=@ViewData["CurrentMediumFilter"]&StyleFilter=@ViewData["CurrentStyleFilter"]">@artcolor.Name</a></li>
            }
        }
    </ul>
    @*Button 2 ends*@

    @*Button 3 begins*@
    <a class="btn btn-secondary dropdown-toggle mx-2" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Filter By Style
    </a>
    <ul class="dropdown-menu">
        @foreach (var artstyle in Model.ArtStyles)
        {
            @if (artstyle.ID == (int)ViewData["CurrentStyleFilter"])
            {
                <li><a class="dropdown-item" href="?ColorFilter=@ViewData["CurrentColorFilter"]&MediumFilter=@ViewData["CurrentMediumFilter"]&StyleFilter=0" style="color:red">@artstyle.Name</a></li>
            }
            else
            {
                <li><a class="dropdown-item" href="?ColorFilter=@ViewData["CurrentColorFilter"]&MediumFilter=@ViewData["CurrentMediumFilter"]&StyleFilter=@artstyle.ID">@artstyle.Name</a></li>
            }
        }
    </ul>
    @*Button 3 ends*@

</div>

<p></p>
<div class="container">
    <div class="row masonry-grid">
        @foreach (var art in Model.Arts)
        {
            if (art.User != null)
            {             
                var picture = new ArtImage { ArtID = art.ID, FileName = "sample.jpg", ID = 0, Source = "/media/" };

                @foreach (var image in Model.ArtImages) @* This needs to be moved to controller and made more efficient. Create a new model combining art and a single image?*@
                {
                    @if (image.ArtID == art.ID)
                    {
                        picture = image;
                    }
                }
                <div class="col-md-4 col-lg-3 masonry-item mt-4">
                    <div class="image-container">
                        <a asp-controller="Home" asp-action="Art" asp-route-id="@art.ID">

                            <img src="@(@picture.Source + @picture.FileName)" alt="@art.Name" class="img-fluid border border-1 border-warning" onContextMenu="return false;">
                            <div class="image-info" style="width:100%">
                                @if (art.User.firstName != null && art.User.lastName != null) 
                                {
                                    <div>@art.User.firstName @art.User.lastName</div> @art.Price
                                }
                                @if (art.Name != null)
                                {
                                    @art.Name 
                                }                                                                

                            </div>
                        </a>
                    </div>
                </div>
            }
        }
    </div>
</div>
@section scripts {
<script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
<script>
    var masonryGrid = document.querySelector('.masonry-grid');
    var masonry = new Masonry(masonryGrid, {
        itemSelector: '.masonry-item',
        columnWidth: '.col-md-4',
        percentPosition: true
    });
</script>
}